var amqp = require('amqp');

var conn = amqp.createConnection({ host: 'localhost' });
conn.on('ready', function() {
    console.log("connected");

    var exchange = conn.exchange('test-direct-routing-exchange', {type:'direct'}, function() {
	console.log("exchange ready");

	var queue = conn.queue('', function(q) {
	    console.log("queue " + q.name + " set up");
	    q.bind('test-direct-routing-exchange', 'black');
            q.subscribe(function(message) {
		console.log("Received black message: " + message);
	    });
	});

    });
});
